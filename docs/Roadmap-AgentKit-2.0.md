# Roadmap: AgentKit 2.0 - 走向智能之路

**所有者**: CTO Office  
**状态**: 规划中  
**版本**: v2.0  
**目标周期**: Q4 2024 - Q1 2025

---

## 1. 愿景与目标

`agentkit` v1.0 成功地扮演了一个强大的“连接器”和“编排器”角色。在 v2.0 中，我们的愿景是让 `agentkit` 进化为一个更具“主见”的 **智能 Agent 框架**。

我们的核心目标是：**将开发者从复杂的 Agent 工作流样板代码中解放出来，让他们能更专注于 Agent 的核心业务逻辑和创新**。

为此，我们将围绕三大核心方向进行深度开发：
- **内置 Agent 模板 (Agent Templates)**
- **增强的工具调用与管理 (Enhanced Tooling)**
- **人机协作 (Human-in-the-Loop)**

---

## 2. 核心方向详述

### 2.1 内置 Agent 模板

> **要解决的问题**: 从零开始构建一个 LangGraph Agent 对于许多开发者来说依然复杂、耗时。
> **目标**: 提供一系列经过预设、开箱即用的 Agent 工作流模板。

#### 2.1.1 研究员 Agent (Researcher Agent)

- **功能**: 接收一个研究课题，能自动规划研究步骤、使用搜索引擎进行信息检索、阅读网页内容、总结关键信息，并最终生成一份结构化的研究报告。
- **技术实现**:
    - 基于 LangGraph 构建一个包含 `plan -> search -> read -> synthesize` 循环的状态机。
    - 预置 `tavily_search` 或 `duckduckgo_search` 等搜索工具。
    - 提供一个默认的报告生成提示（Prompt）。
- **用户价值**: 开发者只需几行代码，就能拥有一个功能强大的信息研究 Agent，并可以轻松地在其基础上进行扩展（例如，替换搜索引擎、修改报告格式）。

#### 2.1.2 代码助手 Agent (Coding Assistant Agent)

- **功能**: 能够理解用户指令，对项目中的代码文件进行读取、修改和写入。
- **技术实现**:
    - 提供文件系统操作的核心工具 (`read_file`, `write_file`, `list_files`)。
    - 预置一个强大的代码生成和修改的系统提示。
    - 实现一个安全沙箱机制，确保 Agent 的文件操作在可控范围内。
- **用户价值**: 可用于自动化生成样板代码、根据需求重构代码、或进行简单的 bug 修复，是构建 AI 驱动的开发工具（AI-DevTools）的基础。

### 2.2 增强的工具调用与管理

> **要解决的问题**: 目前的工具调用较为基础，缺乏健壮的错误处理、验证和监控机制。
> **目标**: 提供一个生产级的工具管理和执行子系统。

#### 2.2.1 工具注册与验证中心

- **功能**: 建立一个中央工具注册表。当开发者向 Agent 注册工具时，系统会自动验证工具的输入/输出模式（基于 Pydantic 模型），并提供更友好的错误提示。
- **技术实现**:
    - 创建一个 `ToolRegistry` 类。
    - 使用 Pydantic 模型来定义工具的 `args_schema` 和 `return_schema`。
- **用户价值**: 提高工具定义的规范性和健壮性，减少因工具参数错误导致的运行时问题。

#### 2.2.2 智能重试与错误处理

- **功能**: 为工具执行提供内置的、可配置的重试逻辑（例如，基于指数退避算法）。当工具调用失败时，能将结构化的错误信息反馈给 Agent，让 Agent “知道”发生了什么并决定下一步行动（例如，修正参数后重试，或向用户求助）。
- **技术实现**:
    - 集成 `tenacity` 或类似的重试库。
    - 定义标准的 `ToolExecutionError` 异常类。
- **用户价值**: 大幅提升 Agent 在面对不稳定的外部工具（如网络请求）时的鲁棒性。

### 2.3 人机协作 (Human-in-the-Loop)

> **要解决的问题**: 全自动化的 Agent 在关键业务决策上存在风险，需要人类的监督和确认。
> **目标**: 在 Agent 工作流中原生支持“暂停-审批”的交互模式。

#### 2.3.1 “等待人类输入”节点

- **功能**: 在 LangGraph 工作流中引入一个新的标准节点类型 `WaitForHumanInput`。当 Agent 运行到此节点时，会暂停执行，并通过 `AGUIAdapter` 向前端发送一个“等待审批”的事件。
- **技术实现**:
    - 在 `langgraph` 状态中增加一个字段，用于标记当前是否处于等待状态。
    - 在 `AGUIAdapter` 中增加一个新的事件类型，用于通知前端渲染审批界面。
- **用户价值**: 这是让 Agent 应用于金融、医疗等严肃生产环境的关键一步，确保了最终决策权掌握在人类手中。

---

## 3. 里程碑与交付计划

- **Milestone 1 (Q4 2024)**:
    - [ ] 完成增强的工具调用与管理子系统。
    - [ ] 发布第一个内置 Agent 模板：研究员 Agent。
- **Milestone 2 (Q1 2025)**:
    - [ ] 完成人机协作功能的核心实现。
    - [ ] 发布代码助手 Agent 模板。
    - [ ] 发布 `agentkit` v2.0.0-beta 版本。 